(function(t){function e(e){for(var n,r,o=e[0],c=e[1],l=e[2],u=0,p=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(p.length)p.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var t,e=0;e<a.length;e++){for(var s=a[e],n=!0,o=1;o<s.length;o++){var c=s[o];0!==i[c]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=s[0]))}return t}var n={},i={app:0},a=[];function r(e){if(n[e])return n[e].exports;var s=n[e]={i:e,l:!1,exports:{}};return t[e].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=t,r.c=n,r.d=function(t,e,s){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(s,n,function(e){return t[e]}.bind(null,n));return s},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var l=0;l<o.length;l++)e(o[l]);var d=c;a.push([0,"chunk-vendors"]),s()})({0:function(t,e,s){t.exports=s("56d7")},"034f":function(t,e,s){"use strict";s("85ec")},1959:function(t,e,s){t.exports=s.p+"img/send.bbabf01a.png"},"4ee8":function(t,e,s){t.exports=s.p+"img/down.75a48a4f.png"},"56d7":function(t,e,s){"use strict";s.r(e);s("e260"),s("e6cf"),s("cca6"),s("a79d");var n=s("2b0e"),i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},a=[],r={name:"App"},o=r,c=(s("034f"),s("2877")),l=Object(c["a"])(o,i,a,!1,null,null,null),d=l.exports,u=s("8c4f"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout-home"},[t.loading?n("div",{staticClass:"lay-loading"},[t._m(0)]):t._e(),t.loading?t._e():n("div",{staticClass:"home-content"},[n("div",{staticClass:"chat",attrs:{id:"chat"}},[t._l(t.msgList,(function(e,i){return[0===e.sign?n("div",{class:t.dShow!==i?"chat-left":"chat-left d-left"},[n("img",{attrs:{src:s("5751")}}),n("div",{staticClass:"msg"},[n("span",{domProps:{innerHTML:t._s(e.msg)}})])]):t._e(),1===e.sign?n("div",{class:t.dShow!==i?"chat-right":"chat-right d-right"},[n("div",{staticClass:"msg"},[t._v(t._s(e.msg))]),n("img",{attrs:{src:s("c121")}})]):t._e(),3===e.sign?n("div",{class:t.dShow!==i?"chat-left":"chat-left d-left"},[n("img",{attrs:{src:s("5751")}}),n("div",{staticClass:"msg msg-special"},[t._l(e.data,(function(e,s){return[s<3?n("span",[t._v(t._s(e.category)+": "+t._s(e.content)+" "),n("br")]):t._e(),s>=3?n("span",[t._v(t._s(e.category)+"："),n("br")]):t._e(),s>=3?n("div",{staticClass:"txt-special"},[t._v(t._s(e.content))]):t._e()]}))],2)]):t._e()]})),n("div",{staticClass:"f-watermark"},[n("img",{staticClass:"watermark",attrs:{src:s("cf05")}})])],2),n("div",{directives:[{name:"show",rawName:"v-show",value:t.modelView,expression:"modelView"}],staticClass:"footer"},[n("el-input",{attrs:{placeholder:"请根据页面提示输入内容"},on:{focus:t.txtFocus},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send.apply(null,arguments)}},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}}),n("img",{attrs:{src:s("1959")},on:{click:t.send}})],1)]),n("van-popup",{attrs:{position:"bottom",overlay:!1},model:{value:t.popupFirst,callback:function(e){t.popupFirst=e},expression:"popupFirst"}},[n("div",{staticClass:"more-dept"},[n("div",{staticClass:"head"},t._l(t.deptArr,(function(e,s){return n("div",{key:s+"p",class:e.select?"dept-one dept-to":"dept-one",on:{click:function(e){return t.selectMore(s)}}},[t._v(" "+t._s(e.name)+" ")])})),0)])]),n("popup",{ref:"model"})],1)},h=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"l-content"},[s("div",{staticClass:"group"},[s("div"),s("div"),s("div")]),s("div",{staticClass:"group-txt"},[t._v("预问诊加载中")])])}],f=(s("ac1f"),s("5319"),s("d3b7"),s("25f0"),s("1276"),s("159b"),s("4de4"),s("d81d"),s("b0c0"),s("d399")),v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"layout-popup"},[n("van-popup",{attrs:{position:"bottom",overlay:!1},model:{value:t.view,callback:function(e){t.view=e},expression:"view"}},[n("div",{staticClass:"main",attrs:{id:"popup"}},[1===t.type?n("div",{staticClass:"type-1"},[n("el-button",{on:{click:t.calcel}},[t._v("错误")]),n("el-button",{attrs:{type:"primary"},on:{click:t.submit}},[t._v("正确")])],1):t._e(),2===t.type?n("div",{staticClass:"type-2"},[n("div",{staticClass:"head"},t._l(t.deptArr,(function(e,s){return n("div",{key:s+"p",class:e.select?"dept-one dept-to":"dept-one",on:{click:function(e){return t.selectOne(s)}}},[t._v(" "+t._s(e.name)+" ")])})),0)]):t._e(),3===t.type?n("div",{staticClass:"type-2"},[n("div",{staticClass:"head"},t._l(t.deptArr,(function(e,s){return n("div",{key:s+"p",class:e.select?"dept-one dept-to":"dept-one",on:{click:function(e){return t.selectMore(s)}}},[t._v(" "+t._s(e.name)+" ")])})),0),t.inType||0!==t.handler&&1!==t.handler?t._e():n("div",{staticClass:"dept-submit",on:{click:t.send}},[t._v(" 确定 ")]),t.inType||2!==t.handler?t._e():n("div",{staticClass:"dept-submit2"},[n("el-button",{on:{click:function(e){return t.send(0)}}},[t._v("不清楚")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.send(1)}}},[t._v("确定")])],1),t.inType||3!==t.handler?t._e():n("div",{staticClass:"dept-submit3"},[n("el-button",{on:{click:function(e){return t.send(0)}}},[t._v("不清楚")]),n("el-button",{on:{click:function(e){return t.send(2)}}},[t._v("都没有")]),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.send(1)}}},[t._v("确定")])],1),t.inType?n("div",{staticClass:"footer"},[n("el-input",{attrs:{placeholder:"请根据页面提示输入内容"},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send.apply(null,arguments)}},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}}),n("img",{attrs:{src:s("1959")},on:{click:t.send}})],1):t._e()]):t._e(),4===t.type?n("div",{staticClass:"type-4"},[n("el-form",{ref:"typeForm",attrs:{model:t.ruleForm}},t._l(t.deptArr,(function(e,s){return n("div",{key:s+"p",staticClass:"one"},[n("div",{staticClass:"title"},[t._v(t._s(e.name)+"：")]),n("el-form-item",{attrs:{rules:[{validator:t.checkAge,trigger:"blur"}],prop:"data."+s+".value"}},[n("el-input",{staticClass:"input-with-select",attrs:{type:"number",placeholder:"请输入时间"},model:{value:t.ruleForm.data[s].value,callback:function(e){t.$set(t.ruleForm.data[s],"value",e)},expression:"ruleForm.data[index].value"}},[n("el-select",{attrs:{slot:"append",placeholder:"请选择"},slot:"append",model:{value:t.ruleForm.data[s].key,callback:function(e){t.$set(t.ruleForm.data[s],"key",e)},expression:"ruleForm.data[index].key"}},t._l(t.options,(function(t,e){return n("el-option",{attrs:{label:t,value:t}})})),1)],1)],1)],1)})),0),n("div",{staticClass:"dept-submit",on:{click:t.submitForm}},[t._v(" 确定 ")])],1):t._e(),5===t.type?n("div",{staticClass:"type-5"},[n("van-picker",{attrs:{title:"标题","show-toolbar":"","value-key":"name",columns:t.columns},on:{confirm:t.fiveConfirm}})],1):t._e(),6===t.type?n("div",{staticClass:"type-6"},[n("div",{staticClass:"block"},[n("div",{staticClass:"title"},[t._v("药品过敏史")]),n("div",{staticClass:"cot"},[n("div",[t._v("头孢")]),n("div",[t._v("头昏布洛芬")]),n("div",[t._v("青霉素")]),n("div",[t._v("头孢ret")]),n("div",[t._v("其他")])])]),n("div",{staticClass:"block"},[n("div",{staticClass:"title"},[t._v("药品过敏史")]),n("div",{staticClass:"cot"},[n("div",[t._v("头孢")]),n("div",[t._v("头昏布洛芬")]),n("div",[t._v("青霉素")]),n("div",[t._v("头孢ret")]),n("div",[t._v("其他")])])]),n("div",{staticClass:"block"},[n("div",{staticClass:"title"},[t._v("药品过敏史")]),n("div",{staticClass:"cot"},[n("div",[t._v("头孢")]),n("div",[t._v("头昏布洛芬")]),n("div",[t._v("青霉素")]),n("div",[t._v("头孢ret")]),n("div",[t._v("其他")])])]),n("div",{staticClass:"block"},[n("div",{staticClass:"title"},[t._v("药品过敏史")]),n("div",{staticClass:"cot"},[n("div",[t._v("头孢")]),n("div",[t._v("头昏布洛芬")]),n("div",[t._v("青霉素")]),n("div",[t._v("头孢ret")]),n("div",[t._v("其他")])])]),t.inType?n("div",{staticClass:"select-submit",on:{click:t.send}},[n("el-button",[t._v("不清楚")]),n("el-button",[t._v("都没有")]),n("el-button",[t._v("确定")])],1):t._e(),t.inType?t._e():n("div",{staticClass:"footer"},[n("el-input",{attrs:{placeholder:"请根据页面提示输入内容"},nativeOn:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.send.apply(null,arguments)}},model:{value:t.msg,callback:function(e){t.msg=e},expression:"msg"}}),n("img",{attrs:{src:s("1959")},on:{click:t.send}})],1)]):t._e(),7===t.type?n("div",{staticClass:"type-7"},[n("div",{staticClass:"head"},[n("div",{staticClass:"one",on:{touchmove:t.move,touchend:t.end,touchstart:t.start}},[t._l(6,(function(e,s){return n("div",{class:t.position===s?"big":""},[t._v(t._s(2*e))])})),n("img",{staticClass:"d-img",attrs:{id:"move",src:s("4ee8")}})],2),n("div",{staticClass:"two"},t._l(t.level,(function(e,s){return n("div",{class:t.position===s?"big-txt":""},[t._v(t._s(e))])})),0)]),n("div",{staticClass:"foot"},[t._v(" （0表示完全无痛，10表示疼痛程度剧烈，无法忍受） ")])]):t._e()])])],1)},m=[],g=(s("4c53"),{name:"popup",data:function(){var t=function(t,e,s){return e?e.length>5?s(new Error("数值不能超过五位数")):-1!==e.indexOf(".")?s(new Error("输入不能为小数")):void(parseInt(e)<=0?s(new Error("数值不能小于等于0")):s()):s(new Error("输入不能为空"))};return{checkAge:t,view:!1,type:"",noMore:!1,handler:0,inType:!1,startX:0,oneArr:[],position:0,msg:"",selectData:"1",deptArr:[],options:[],ruleForm:{data:[]},columns:["杭州","宁波","温州","绍兴","湖州","嘉兴","金华","衢州"],level:["无痛","轻微","轻度","中度","重度","激烈"]}},methods:{start:function(t){var e=t.touches[0].screenX/6/4-17;this.startX=e,console.log(document.body.scrollWidth,t)},move:function(t){var e=document.getElementById("move");e.setAttribute("style","left:"+(t.touches[0].pageX-this.startX)+"px");var s=t.touches[0].pageX-this.startX,n=(document.body.scrollWidth-32)/6;this.position=parseInt(s/n),console.log(this.position,t.touches[0].pageX)},end:function(t){t.touches[0].screenX},submitForm:function(){var t=this;this.noMore||this.$refs["typeForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;var s="";t.ruleForm.data.forEach((function(t){s+=t.sub+t.value+t.key+"，"})),s.length>0&&(s=s.substring(0,s.length-1)),t.noMore=!0,t.$parent.popupBackData(4,s)}))},fiveConfirm:function(t){var e="";this.oneArr.forEach((function(s,n){e+=s.name+t[n].name+s.unit+"，"})),e.length>0&&(e=e.substring(0,e.length-1)),this.noMore=!0,this.$parent.popupBackData(5,e)},send:function(t){if(!this.noMore){if(0===t||2===t)return this.noMore=!0,void this.$parent.popupBackData(3,0===t?"不清楚":"都没有");if(this.inType&&1!==t){if(0===this.msg.length)return void Object(f["a"])({message:"未输入任何内容",position:"top"});this.noMore=!0,this.$parent.popupBackData(3,this.msg),this.msg=""}else{var e=JSON.parse(JSON.stringify(this.deptArr.filter((function(t){if(t.select)return t}))));if(0===e.length)return void Object(f["a"])({message:"未选择任何选项",position:"top"});var s="";this.deptArr.forEach((function(t,e){t.select&&(s+=t.name+",")})),s=s.length>1?s.substring(0,s.length-1):s,this.noMore=!0,this.$parent.popupBackData(3,s)}}},selectMore:function(t){this.inType=t===this.deptArr.length-1&&this.deptArr[this.deptArr.length-1].input_box,this.inType?(this.deptArr.forEach((function(t){t.select=!1})),this.deptArr[t].select=!this.deptArr[t].select,this.$forceUpdate()):(this.deptArr[this.deptArr.length-1].select=!1,this.deptArr[t].select=!this.deptArr[t].select)},open:function(t){this.view=0!==t,this.handler=0,setTimeout((function(){var t=document.getElementById("chat"),e=document.getElementById("popup");console.log(e.offsetHeight,e.clientHeight),t.style.height="calc(100% - ".concat(e.offsetHeight,"px)"),t.scrollTop=t.scrollHeight}),200)},changeType:function(t,e,s){var n=this;this.type=t,2===t&&(this.deptArr=e),3===t&&(this.deptArr=e,this.handler=s),4===t&&(this.deptArr=e,this.options=s,e.forEach((function(t){n.ruleForm.data.push({key:"天",value:"",sub:t.name})}))),5===t&&(this.columns=[],this.oneArr=e,e.forEach((function(t){n.columns.push({values:t.items})})))},calcel:function(){this.show=!1,this.$parent.modelView=!0},submit:function(){this.noMore||1===this.type&&(this.noMore=!0,this.$parent.popupBackData(1,"正确"))},selectOne:function(t){this.noMore||(this.deptArr.forEach((function(e,s){e.select=t===s&&!e.select})),this.noMore=!0,this.$parent.popupBackData(1,this.deptArr[t].name),this.deptArr.forEach((function(t){t.select=!1})))}}}),y=g,_=(s("ce69"),Object(c["a"])(y,v,m,!1,null,"748f1ded",null)),b=_.exports,x=s("bc3a"),k=s.n(x),w={},C="https://debugcheckdirect-alpha.talkinggenie.com/medical-graph/state/execute";w.request=function(t){k()({method:t.methods+"",url:C,data:t.data}).then((function(e){t.success(e)})).catch((function(e){console.log(e),console.log(t.that),Object(f["a"])("网络异常"),t.fail(e)}))};var T=w,A={name:"home",components:{Popup:b},data:function(){return{msg:"",loading:!1,noClick:!1,popupFirst:!1,modelView:!0,dShow:"",sendType:"",msgList:[{msg:"欢迎来到预问诊，我是智能助理果果",sign:0}],deptArr:[{name:"传染科",sign:"202103290001",select:!1},{name:"儿科",sign:"202103290002",select:!1},{name:"分泌内科",sign:"202103290003",select:!1},{name:"口腔科",sign:"202103290004",select:!1},{name:"呼吸内科",sign:"202103290005",select:!1},{name:"妇产科",sign:"202103290006",select:!1},{name:"心胸外科",sign:"202103290007",select:!1},{name:"心血管科",sign:"202103290008",select:!1}],deptSelect:[],params:{query:"",sessionId:"",machineId:"210000000000001"}}},created:function(){},mounted:function(){var t=this;this.params.sessionId=this.guid()+(new Date).getTime(),this.params.query="开启";setTimeout((function(){t.apiToModel()}),1e3)},methods:{apiToModel:function(t,e){var s=this;this.noClick=!0,T.request({methods:"post",data:this.params,that:this,success:function(t){if(setTimeout((function(){s.noClick=!1}),200),"开启"===s.params.query)return s.send("请选择科室",0),s.popupFirst=!0,s.loading=!1,null;s.processReturn(t,e)},fail:function(e){t&&t(e),s.noClike=!1}})},guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0,s="x"==t?e:3&e|8;return s.toString(16)}))},processReturn:function(t,e){var s=this;this.$refs.model.noMore=!1;var n=-1,i=-1;t=t.data,t.data&&t.data.answer&&(n=t.data.answer.cssType,i=t.data.answer.handler);var a=t.data&&t.data.answer&&t.data.answer.reply||0;if("first"===e){var r=a.split("\r\n");a="",r.forEach((function(t){a+=t+"<br/>"}))}if(1002!==n){if(setTimeout((function(){s.send(a,0)}),250),1001===i&&this.processType(1),0===n)return this.$refs.model.open(0),this.modelView=!0,this.sendType="last",void setTimeout((function(){var t=document.getElementById("chat");t.style.height="calc(100% - 70px)"}),400);if(1===n){var o=t.data&&t.data.answer&&t.data.answer.data&&t.data.answer.data.value||[];o.forEach((function(t){return t.select=!1})),this.openModel(),this.$refs.model.changeType(2,o,i)}if(2===n){var c=t.data&&t.data.answer&&t.data.answer.data&&t.data.answer.data.value||[];c.forEach((function(t){return t.select=!1})),this.openModel(),this.$refs.model.changeType(3,c,i)}if(3===n){var l=t.data&&t.data.answer&&t.data.answer.data&&t.data.answer.data.value||[];this.openModel(),this.$refs.model.changeType(5,l)}if(1001===n){var d=t.data&&t.data.answer&&t.data.answer.data&&t.data.answer.data.value||[],u=t.data.answer.units;this.openModel(),this.$refs.model.changeType(4,d,u)}}else{var p=t.data&&t.data.answer&&t.data.answer.data&&t.data.answer.data.value||[];this.send(p,3)}},popupBackData:function(t,e){this.send(e,1),this.params.query=e,this.apiToModel()},processType:function(t){0!=t&&t&&(this.openModel(),this.$refs.model.changeType(t))},openModel:function(){this.$refs.model.open(),this.modelView=!1},submit:function(){this.deptSelect=JSON.parse(JSON.stringify(this.deptArr.filter((function(t){if(t.select)return t})))),0!==this.deptSelect.length?(this.deptArr=this.deptArr.map((function(t){return t.select=!1})),this.popupFirst=!1,this.send("请确定一下信息：xxxx,xxxx,xxx",0),this.processType(1)):Object(f["a"])({message:"未选择任何科室",position:"top"})},selectMore:function(t){this.noClick||(this.noClick=!0,this.deptArr=this.deptArr.map((function(t){return t.select=!1,t})),this.deptArr[t].select=!0,this.popupFirst=!1,this.deptArr[t].select=!1,this.send(this.deptArr[t].name,1),this.params.query=this.deptArr[t].sign,this.apiToModel(null,"first"))},send:function(t,e){var s=this;null!=e||""!=this.msg?(1===e||0===e?this.msgList.push({msg:t,sign:e}):3===e?this.msgList.push({data:t,sign:3}):(this.msgList.push({msg:this.msg,sign:1}),"last"===this.sendType&&(this.sendType="",this.params.query=this.msg,this.apiToModel()),this.msg=""),this.dShow=this.msgList.length-1,setTimeout((function(){s.dShow="",s.toFooter()}),100)):Object(f["a"])({message:"空消息不能发送",position:"top"})},toFooter:function(){var t=document.getElementById("chat");t.scrollTop=t.scrollHeight},txtFocus:function(){var t=this;setTimeout((function(){t.toFooter()}),500)}}},M=A,O=(s("c863"),Object(c["a"])(M,p,h,!1,null,"48196604",null)),F=O.exports;n["default"].use(u["a"]);var E=[{name:"home",path:"/",component:F}],$=new u["a"]({routes:E}),S=$,j=(s("157a"),s("0fae"),s("5c96")),B=s("e41f"),I=s("f253");n["default"].config.productionTip=!1,n["default"].use(j["Input"]).use(j["Button"]).use(j["Form"]).use(j["FormItem"]).use(j["Select"]).use(j["Option"]),n["default"].use(B["a"]).use(I["a"]),new n["default"]({router:S,render:function(t){return t(d)}}).$mount("#app")},5751:function(t,e,s){t.exports=s.p+"img/doctor.e68c4b80.png"},"85ec":function(t,e,s){},"887a":function(t,e,s){},c121:function(t,e,s){t.exports=s.p+"img/user.aa6b1bc7.png"},c863:function(t,e,s){"use strict";s("e29f")},ce69:function(t,e,s){"use strict";s("887a")},cf05:function(t,e,s){t.exports=s.p+"img/logo.c3674120.png"},e29f:function(t,e,s){}});